<div class="CssAccordion">
  <ng-container
    *ngTemplateOutlet="drawerList; context: { $implicit: items, level: 0 }"
  ></ng-container>

  <ng-template #drawerList let-list let-level="level">
    <div
      class="faq-drawer"
      [class.faq-drawer--nested]="level > 0"
      *ngFor="let item of list"
    >
      <input class="faq-drawer__trigger" [id]="item.id" type="checkbox" />

      <label class="faq-drawer__title" [for]="item.id">
        <span class="faq-drawer__title-text">{{ item.title }}</span>

        <svg
          class="faq-drawer__chevron"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          aria-hidden="true"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="m19.5 8.25-7.5 7.5-7.5-7.5"
          />
        </svg>
      </label>

      <div class="faq-drawer__content-wrapper">
        <div class="faq-drawer__content">
          <p>{{ item.body }}</p>

          <ng-container *ngIf="item.children?.length">
            <ng-container
              *ngTemplateOutlet="
                drawerList;
                context: { $implicit: item.children, level: level + 1 }
              "
            ></ng-container>
          </ng-container>
        </div>
      </div>
    </div>
  </ng-template>
</div>
